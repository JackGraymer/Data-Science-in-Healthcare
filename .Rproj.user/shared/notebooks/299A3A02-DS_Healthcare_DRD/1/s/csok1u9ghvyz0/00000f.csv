"0",""
"0","# Filter the data for each complete month in 2018 to 2023 "
"0","Data_monthly <- Data %>%"
"0","  filter(`Month` >= ym(""2018-01"") & `Month` <= ym(""2023-12""))"
"0",""
"0","# Group the data by occurrence state and month, then sum deaths per month"
"0","Data_monthly <- Data_monthly %>%"
"0","  group_by(`Occurrence State`, year = year(`Month`), month = month(`Month`)) %>%"
"0","  summarise(Deaths = sum(Deaths))"
"1","[38;5;232m`summarise()` has grouped output by 'Occurrence State', 'year'. You can override
using the `.groups` argument.[39m
"
"0","# Merge the death data with population data by state and year"
"0","Data_monthly <- Data_monthly %>%"
"0","  left_join(population_data, by = c(""Occurrence State"" = ""State"", ""year"" = ""year""))"
"0",""
"0","# Calculate deaths per 100,000 inhabitants for each year"
"0","Data_monthly <- Data_monthly  %>%"
"0","  mutate(Deaths_per_100000 = (Deaths / population_count) * 100000)"
"0",""
"0",""
"0","# Create 'treatment' and 'post_policy' variables"
"0","Data_monthly <- Data_monthly %>%"
"0","  mutate("
"0","    treatment = ifelse(`Occurrence State` == ""Oregon"", 1, 0),  # 1 for Oregon, 0 for California/Washington"
"0","    post_policy = ifelse(year >= 2021, 1, 0),  # 1 for years 2021 and later"
"0","    interaction = treatment * post_policy  # Interaction term for DiD"
"0","  )"
"0",""
"0","# Create a new date column by combining year and month"
"0","Data_monthly <- Data_monthly %>%"
"0","  mutate(date = ym(paste(year, month, sep = ""-"")))  # Combine year and month into a date"
"0",""
"0",""
"0","# Difference-in-Differences (DiD) regression model with Deaths_per_100000"
"0",""
"0","did_model <- lm(Deaths_per_100000 ~ treatment + post_policy + interaction, data = Data_monthly)"
"0","summary(did_model)"
"1","
Call:
"
"1",""
"1","lm(formula = Deaths_per_100000 ~ treatment + post_policy + interaction, 
    data = Data_monthly)"
"1",""
"1","

"
"1",""
"1","Residuals:
"
"1","    Min "
"1","     1Q "
"1"," Median "
"1","     3Q "
"1","    Max "
"1","
"
"1","-1.5964 "
"1","-0.6697 "
"1","-0.0742 "
"1"," 0.4097 "
"1"," 3.1322 "
"1","
"
"1","
Coefficients:
"
"1","           "
"1"," Estimate"
"1"," Std. Error"
"1"," t value"
"1"," Pr(>|t|)"
"1","    "
"1","
(Intercept)"
"1","   2.2685"
"1","     0.1065"
"1","  21.294"
"1","   <2e-16"
"1"," ***"
"1","
treatment  "
"1","   0.2405"
"1","     0.1845"
"1","   1.304"
"1","   0.1938"
"1","    "
"1","
post_policy"
"1","   1.7343"
"1","     0.1507"
"1","  11.511"
"1","   <2e-16"
"1"," ***"
"1","
interaction"
"1","   0.5451"
"1","     0.2610"
"1","   2.089"
"1","   0.0379"
"1"," *  "
"1","
"
"1","---
Signif. codes:  "
"1",""
"1","0 â€˜***â€™ 0.001 â€˜**â€™ 0.01 â€˜*â€™ 0.05 â€˜.â€™ 0.1 â€˜ â€™ 1"
"1","
"
"1","
Residual standard error:"
"1"," "
"1","0.904"
"1"," "
"1","on"
"1"," "
"1","212"
"1"," "
"1","degrees of freedom"
"1","
"
"1","Multiple R-squared: "
"1"," "
"1","0.5531"
"1",",	Adjusted R-squared: "
"1"," "
"1","0.5468"
"1"," "
"1","
F-statistic:"
"1"," "
"1","87.48"
"1"," "
"1","on"
"1"," "
"1","3"
"1"," "
"1","and"
"1"," "
"1","212"
"1"," "
"1","DF,  p-value:"
"1"," "
"1","< 2.2e-16"
"1","
"
"1","
"
"0","# Robust standard errors to handle heteroscedasticity"
"0","coeftest(did_model, vcov = vcovHC(did_model, type = ""HC1""))"
"1","
t test of coefficients:

"
"1","           "
"1"," Estimate"
"1"," Std. Error"
"1"," t value"
"1"," Pr(>|t|)"
"1","    "
"1","
(Intercept)"
"1","  2.26848"
"1","    0.07104"
"1"," 31.9327"
"1","  < 2e-16"
"1"," ***"
"1","
treatment  "
"1","  0.24053"
"1","    0.11582"
"1","  2.0767"
"1","  0.03904"
"1"," *  "
"1","
post_policy"
"1","  1.73430"
"1","    0.16145"
"1"," 10.7418"
"1","  < 2e-16"
"1"," ***"
"1","
interaction"
"1","  0.54514"
"1","    0.24081"
"1","  2.2638"
"1","  0.02460"
"1"," *  "
"1","
"
"1","---
Signif. codes:  "
"1",""
"1","0 â€˜***â€™ 0.001 â€˜**â€™ 0.01 â€˜*â€™ 0.05 â€˜.â€™ 0.1 â€˜ â€™ 1"
"1","
"
"1","
"
